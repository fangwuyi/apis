webpackJsonp([1],{"+cgv":function(e,t){},"+eH4":function(e,t){},"3ObL":function(e,t){},"3f40":function(e,t){},"4qOc":function(e,t){},"5QK8":function(e,t){},"6vg8":function(e,t){},"8D4q":function(e,t){},"A+82":function(e,t){},GgX3:function(e,t){},JrWt:function(e,t){},LVBX:function(e,t){},LuMr:function(e,t){},NFa4:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};a.d(i,"timestampToTime",function(){return D}),a.d(i,"setStore",function(){return C}),a.d(i,"getStore",function(){return A}),a.d(i,"removeStore",function(){return M}),a.d(i,"setCookie",function(){return V}),a.d(i,"getCookie",function(){return T}),a.d(i,"delCookie",function(){return P});var s=a("fZjL"),l=a.n(s),r=a("7+uW"),o=a("zL8q"),n=a.n(o),d=(a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var m=a("VU/8")({name:"App"},d,!1,function(e){a("3ObL")},null,null).exports,c=a("/ocq"),u=a("mvHQ"),p=a.n(u),g=a("mtWM"),f=a.n(g),h=function(e,t,a){return f()({method:e,url:t,headers:{"Content-Type":"application/x-www-form-urlencoded",token:localStorage.getItem("logintoken")},data:a,traditional:!0,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){return e.data})},v=function(e){return function(e,t,a){return f()({method:e,url:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a,traditional:!0,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){return e.data})}("post","/index.php/adm/Login/index",e)},b=function(e){return h("post","/index.php/adm/News/imgDo",e)},_=function(e){return h("post","/index.php/adm/News/newsDo",e)},F=function(e){return h("post","/index.php/adm/News/newsDo",e)},y=function(e){return h("post","/index.php/adm/News/cateList",e)},w=function(e){return h("post","/index.php/adm/News/cateDo",e)},k=function(e){return h("post","/index.php/adm/Community/labelDo",e)},x=function(e){return h("post","/index.php/adm/News/imgList",e)},$=function(e){return h("post","/index.php/adm/index/hotsearchDo",e)},z=function(e){return h("post","/index.php/adm/index/eportDo",e)},S=function(e){return h("post","/index.php/adm/index/feedbackDo",e)},I=function(e){return h("post","/index.php/adm/index/messagePushDo",e)},D=function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},C=function(e,t){e&&("string"!=typeof t&&(t=p()(t)),window.localStorage.setItem(e,t))},A=function(e){if(e)return window.localStorage.getItem(e)},M=function(e){e&&window.localStorage.removeItem(e)};function V(e,t,a){var i=new Date;i.setDate(i.getDate()+a),document.cookie=e+"="+t+";expires="+i}function T(e){var t=RegExp(e+"=([^;]+)"),a=document.cookie.match(t);return a?a[1]:""}function P(e){V(e,null,-1)}a("NC6I");var N={name:"login",data:function(){return{logining:!1,rememberpwd:!1,ruleForm:{account:"",password:""},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created:function(){this.getuserpwd()},methods:{getuserpwd:function(){""!=T("user")&&""!=T("pwd")&&(this.ruleForm.account=T("user"),this.ruleForm.password=T("pwd"),this.rememberpwd=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请输入用户名密码！"),t.logining=!1,!1;t.logining=!0,v(t.ruleForm).then(function(e){if(0!=e.errcode)return t.$message.error(e.errmsg),t.logining=!1,!1;t.rememberpwd?V("user",t.ruleForm.account,7):(P("user"),P("pwd")),setTimeout(function(){t.logining=!1,localStorage.setItem("logintoken",e.data),localStorage.setItem("userdata",p()(t.ruleForm)),t.$store.commit("login","true"),t.$router.push({path:"/News/News"})},1e3)})})}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{"label-position":"left",model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",model:{value:e.rememberpwd,callback:function(t){e.rememberpwd=t},expression:"rememberpwd"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var U=a("VU/8")(N,R,!1,function(e){a("+eH4")},"data-v-1aa543b3",null).exports,E={name:"navcon",data:function(){return{collapsed:!0,imgshow:a("gQKk"),imgsq:a("rWRm"),user:{}}},created:function(){this.user=JSON.parse(localStorage.getItem("userdata"))},methods:{exit:function(){var e=this;this.$confirm("退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){setTimeout(function(){e.$store.commit("logout","false"),e.$router.push({path:"/login"}),e.$message({type:"success",message:"已退出登录!"})},1e3)}).catch(function(){e.$message({type:"info",message:"已取消"})})},toggle:function(e){this.collapsed=!e,this.$root.Bus.$emit("toggle",this.collapsed)},content:function(){}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#334157","text-color":"#fff","active-text-color":"#fff"}},[a("el-button",{staticClass:"buttonimg"},[a("img",{staticClass:"showimg",attrs:{src:e.collapsed?e.imgsq:e.imgshow},on:{click:function(t){return e.toggle(e.collapsed)}}})]),e._v(" "),a("el-submenu",{staticClass:"submenu",attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("超级管理员")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-3"},on:{click:function(t){return e.exit()}}},[e._v("退出")])],2)],1)},staticRenderFns:[]};var B={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2",collapse:e.collapsed,"collapse-transition":"",router:"","default-active":e.$route.path,"unique-opened":"","background-color":"#334157","text-color":"#fff","active-text-color":"#ffd04b"}},[i("div",{staticClass:"logobox"},[i("img",{staticClass:"logoimg",attrs:{src:a("dLd/"),alt:""}})]),e._v(" "),e._l(e.allmenu,function(t){return i("el-submenu",{key:t.menuid,attrs:{index:t.menuname}},[i("template",{slot:"title"},[i("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),i("span",[e._v(e._s(t.menuname))])]),e._v(" "),i("el-menu-item-group",e._l(t.menus,function(t){return i("el-menu-item",{key:t.menuid,attrs:{index:"/"+t.url}},[i("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),i("span",[e._v(e._s(t.menuname))])])}),1)],2)})],2)},staticRenderFns:[]};var L={name:"index",data:function(){return{showclass:"asideshow",showtype:!1}},components:{navcon:a("VU/8")(E,q,!1,function(e){a("tj7r")},"data-v-06de4a5b",null).exports,leftnav:a("VU/8")({name:"leftnav",data:function(){return{collapsed:!1,allmenu:[]}},created:function(){var e=this;this.allmenu=[{menuid:3,icon:"li-icon-xitongguanli",menuname:"资讯管理",hasThird:null,url:null,menus:[{menuid:33,icon:"icon-cms-manage",menuname:"资讯管理",hasThird:"N",url:"News/News",menus:null},{menuid:35,icon:"icon-cms-manage",menuname:"资讯类别管理",hasThird:"N",url:"News/news_type",menus:null}]},{menuid:4,icon:"li-icon-shangchengxitongtubiaozitihuayuanwenjian91",menuname:"社区内容管理",hasThird:null,url:null,menus:[{menuid:44,icon:"icon-provider-manage",menuname:"社区内容",hasThird:"N",url:"talks/talks",menus:null}]},{menuid:5,icon:"icon-cus-manage",menuname:"用户信息管理",hasThird:null,url:null,menus:[{menuid:55,icon:"icon-cus-manage",menuname:"管理员信息",hasThird:"N",url:"admin/admin",menus:null},{menuid:56,icon:"icon-cus-manage",menuname:"用户信息",hasThird:"N",url:"admin/user",menus:null}]},{menuid:1,icon:"li-icon-xiangmuguanli",menuname:"系统管理",hasThird:null,url:null,menus:[{menuid:11,icon:"icon-cat-skuQuery",menuname:"启动页管理",hasThird:"N",url:"guides/guide",menus:null},{menuid:12,icon:"icon-order-manage",menuname:"首页轮播图",hasThird:"N",url:"banner/banner",menus:null},{menuid:15,icon:"icon-order-manage",menuname:"中国女孩轮播图",hasThird:"N",url:"banner/china_girl",menus:null},{menuid:13,icon:"icon-order-manage",menuname:"首页栏目管理",hasThird:"N",url:"News/first_news",menus:null},{menuid:14,icon:"icon-order-manage",menuname:"社区基础标签",hasThird:"N",url:"talks/talklabel",menus:null},{menuid:16,icon:"icon-order-manage",menuname:"热搜榜",hasThird:"N",url:"common/hotsearch",menus:null}]},{menuid:7,icon:"li-icon-xiangmuguanli",menuname:"消息推送管理",hasThird:null,url:null,menus:[{menuid:71,icon:"icon-cus-manage",menuname:"推送消息",hasThird:"N",url:"message/message_push",menus:null},{menuid:72,icon:"icon-order-manage",menuname:"用户设备",hasThird:"N",url:"message/member_device",menus:null}]},{menuid:6,icon:"icon-cus-manage",menuname:"其他内容管理",hasThird:null,url:null,menus:[{menuid:61,icon:"icon-cus-manage",menuname:"反馈建议",hasThird:"N",url:"other/feedback",menus:null},{menuid:62,icon:"icon-cus-manage",menuname:"用户举报",hasThird:"N",url:"other/eport",menus:null}]}],this.$root.Bus.$on("toggle",function(t){e.collapsed=!t})}},B,!1,function(e){a("5QK8")},null,null).exports},methods:{},created:function(){var e=this;this.$root.Bus.$on("toggle",function(t){t?e.showclass="asideshow":setTimeout(function(){e.showclass="aside"},300)})},beforeUpdate:function(){},beforeMount:function(){}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticClass:"index-con"},[t("el-aside",{class:this.showclass},[t("leftnav")],1),this._v(" "),t("el-container",{staticClass:"main-con"},[t("el-header",{staticClass:"index-header"},[t("navcon")],1),this._v(" "),t("el-main",{attrs:{clss:"index-main"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")(L,H,!1,function(e){a("LuMr")},null,null).exports,Q={data:function(){return{loading:!1,title:"添加启动页",imglist:[],editForm:{act:"update",id:"",category:"1",img:"",status:"",url:"",sort:"",token:localStorage.getItem("logintoken")},addForm:{act:"add",category:"1",img:"",status:"",url:"",sort:"",token:localStorage.getItem("logintoken")},listStatus:[{id:1,name:"正常"},{id:2,name:"禁用"}],editFormVisible:!1,addFormVisible:!1,rules:{sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},param1:{category:1},fileList:[]}},created:function(){this.getdata(this.param1)},methods:{handleRemove:function(e,t){console.log(e,t)},getdata:function(e){var t=this,a={1:"正常",2:"禁用"};x(e).then(function(e){if(t.loading=!1,10006==e.errcode)return t.$store.commit("logout","false"),t.$router.push({path:"/login"}),!1;if(0===e.errcode){for(var i=e.data.imglist,s=i.length-1;s>=0;s--){var l=i[s].status;i[s].statusname=a[l]?a[l]:l}t.imglist=i}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("数据加载失败，请稍后再试！")})},delRecord:function(e,t){var a=this,i={act:"upstatus",status:2,id:t.id};i.status=1==t.status?2:1;var s=1==t.status?"禁用":"显示";this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){b(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.param1)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("删除失败，请稍后再试！")})}).catch(function(e){console.log("err:",e)})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加启动页",this.type=2,this.addForm.img="",this.addForm.url="",this.addForm.sort=1,this.addForm.status=1},submitAddForm:function(){var e=this;b(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改启动页",this.type=1,this.editForm.id=t.id,this.editForm.sort=t.sort,this.editForm.img=t.img,this.editForm.url=t.url,this.editForm.status=t.status},submitEditForm:function(){var e=this;b(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1,this.addFormVisible=!1},beforeremove:function(e,t){var a=this;return a.$confirm("此操作将删除当前会场, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.asyncReq(e,t)}).catch(function(){a.$message({type:"info",message:"已取消删除"})}),!1},asyncReq:function(e,t){var a=this;console.log("asyncReqfileList:",t),console.log("asyncReqfile:",e);e.id;b({}).then(function(e){if(console.log("res",e),10006==e.data.errcode)return this.$store.commit("logout","false"),this.$router.push({path:"/login"}),!1;0===e.data.errcode?(console.log("删除成功"),a.getdata(a.param1),a.$message({type:"success",message:e.data.errmsg})):(console.log("删除失败"),a.$message({type:"info",message:e.data.errmsg}))})},submitUpload:function(){this.$refs.upload.submit()},handleAvatarSuccess:function(e,t,a){this.addForm.img=e.data},submitUpload2:function(){this.$refs.upload2.submit()},handleAvatarSuccess2:function(e,t,a){this.editForm.img=e.data}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("启动页管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加启动页")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"30px"},attrs:{border:"","element-loading-text":"拼命加载中"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{size:"small",data:e.imglist,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"img",label:"Banner",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.img,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"关联文章ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusname",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("显示")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"40%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.editForm.img,callback:function(t){e.$set(e.editForm,"img",t)},expression:"editForm.img"}}),e._v(" "),a("el-upload",{ref:"upload2",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-success":e.handleAvatarSuccess2,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload2}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入链接1"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"40%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.addForm.img,callback:function(t){e.$set(e.addForm,"img",t)},expression:"addForm.img"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-success":e.handleAvatarSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入链接"},model:{value:e.addForm.url,callback:function(t){e.$set(e.addForm,"url",t)},expression:"addForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)],1)},staticRenderFns:[]};var j=a("VU/8")(Q,K,!1,function(e){a("X7ff")},null,null).exports,W={data:function(){return{dialogImageUrl:"",dialogVisible:!1,loading:!1,title:"添加Banner",imglist:[],editForm:{act:"update",id:"",category:"2",img:"",status:"",type:4,url:"",sort:"",token:localStorage.getItem("logintoken")},addForm:{act:"add",category:"2",img:"",status:"",type:4,url:"",sort:"",token:localStorage.getItem("logintoken")},listStatus:[{id:1,name:"正常"},{id:2,name:"禁用"}],listType:[{id:4,name:"请选择"},{id:1,name:"跳转文章"},{id:2,name:"跳转帖子"},{id:3,name:"跳转H5"},{id:5,name:"跳转APP页面"}],editFormVisible:!1,addFormVisible:!1,rules:{sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},fileList:[],param1:{category:2}}},created:function(){this.getdata(this.param1)},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getdata:function(e){var t=this;this.loading=!0;var a={1:"正常",2:"禁用"};x(e).then(function(e){if(t.loading=!1,0===e.errcode){for(var i=e.data.imglist,s=i.length-1;s>=0;s--){var l=i[s].status;i[s].statusname=a[l]?a[l]:l}t.imglist=i}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("数据加载失败，请稍后再试！")})},delRecord:function(e,t){var a=this,i={act:"upstatus",status:2,id:t.id};i.status=1==t.status?2:1;var s=1==t.status?"禁用":"显示";this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){b(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.param1)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作失败，请稍后再试！")})}).catch(function(e){console.log("err:",e)})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加Banner",this.type=2,this.addForm.img="",this.addForm.url="",this.addForm.sort=1,this.addForm.status=1,this.addForm.type=4},submitAddForm:function(){var e=this;b(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改Banner",this.type=1,this.editForm.id=t.id,this.editForm.sort=t.sort,this.editForm.img=t.img,this.editForm.type=t.type,this.editForm.url=t.url,this.editForm.status=t.status},submitEditForm:function(){var e=this;b(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1,this.addFormVisible=!1},beforeupload:function(e){console.log("file:",e)},beforeremove:function(e,t){var a=this;return a.$confirm("此操作将删除当前会场, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.asyncReq(e,t)}).catch(function(){a.$message({type:"info",message:"已取消删除"})}),!1},onchange:function(e,t){this.param.img=e.url,this.param.title=e.name},submitUpload:function(){this.$refs.upload.submit()},handleAvatarSuccess:function(e,t,a){this.addForm.img=e.data,this.editForm.img=e.data}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("首页Banner管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加Banner")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"30px"},attrs:{border:"","element-loading-text":"拼命加载中"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{size:"small",data:e.imglist,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"img",label:"Banner",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.img,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"关联参数值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusname",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("显示")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"60%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.editForm.img,callback:function(t){e.$set(e.editForm,"img",t)},expression:"editForm.img"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-preview":e.handlePictureCardPreview,"before-upload":e.beforeupload,"on-success":e.handleAvatarSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"type"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入关联参数"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}}),e._v(" "),a("div",[e._v("文章：参数值填 ID，帖子：参数值填 ID ，H5：参数值填 完整链接，不触发则不填,跳转app页可选择community，release")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"60%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.addForm.img,callback:function(t){e.$set(e.addForm,"img",t)},expression:"addForm.img"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-preview":e.handlePictureCardPreview,"before-upload":e.beforeupload,"on-success":e.handleAvatarSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"type"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入关联参数"},model:{value:e.addForm.url,callback:function(t){e.$set(e.addForm,"url",t)},expression:"addForm.url"}}),e._v(" "),a("div",[e._v("文章：参数值填 ID，帖子：参数值填 ID ，H5：参数值填 完整链接，不触发则不填,跳转app页可选择community，release")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")(W,J,!1,function(e){a("GgX3")},null,null).exports,Y={data:function(){return{dialogImageUrl:"",dialogVisible:!1,loading:!1,title:"添加Banner",imglist:[],editForm:{act:"update",id:"",category:"4",img:"",status:"",type:4,url:"",sort:"",token:localStorage.getItem("logintoken")},addForm:{act:"add",category:"4",img:"",status:"",type:4,url:"",sort:"",token:localStorage.getItem("logintoken")},listStatus:[{id:1,name:"正常"},{id:2,name:"禁用"}],listType:[{id:4,name:"请选择"},{id:1,name:"跳转文章"},{id:2,name:"跳转帖子"},{id:3,name:"跳转H5"},{id:5,name:"跳转APP页面"}],editFormVisible:!1,addFormVisible:!1,rules:{sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},fileList:[],param1:{category:4}}},created:function(){this.getdata(this.param1)},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getdata:function(e){var t=this;this.loading=!0;var a={1:"正常",2:"禁用"};x(e).then(function(e){if(t.loading=!1,0===e.errcode){for(var i=e.data.imglist,s=i.length-1;s>=0;s--){var l=i[s].status;i[s].statusname=a[l]?a[l]:l}t.imglist=i}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("数据加载失败，请稍后再试！")})},delRecord:function(e,t){var a=this,i={act:"upstatus",status:2,id:t.id};i.status=1==t.status?2:1;var s=1==t.status?"禁用":"显示";this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){b(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.param1)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作失败，请稍后再试！")})}).catch(function(e){console.log("err:",e)})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加Banner",this.type=2,this.addForm.img="",this.addForm.type=4,this.addForm.url="",this.addForm.sort=1,this.addForm.status=1},submitAddForm:function(){var e=this;b(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改Banner",this.type=1,this.editForm.id=t.id,this.editForm.sort=t.sort,this.editForm.img=t.img,this.editForm.type=t.type,this.editForm.url=t.url,this.editForm.status=t.status},submitEditForm:function(){var e=this;b(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1,this.addFormVisible=!1},beforeupload:function(e){console.log("file:",e)},beforeremove:function(e,t){var a=this;return a.$confirm("此操作将删除当前会场, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.asyncReq(e,t)}).catch(function(){a.$message({type:"info",message:"已取消删除"})}),!1},onchange:function(e,t){this.param.img=e.url,this.param.title=e.name},submitUpload:function(){this.$refs.upload.submit()},handleAvatarSuccess:function(e,t,a){this.addForm.img=e.data,this.editForm.img=e.data}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("中国Banner管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加Banner")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"30px"},attrs:{border:"","element-loading-text":"拼命加载中"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{size:"small",data:e.imglist,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"img",label:"Banner",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.img,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"关联参数值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusname",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("显示")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"60%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.editForm.img,callback:function(t){e.$set(e.editForm,"img",t)},expression:"editForm.img"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-preview":e.handlePictureCardPreview,"before-upload":e.beforeupload,"on-success":e.handleAvatarSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"type"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入关联参数"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}}),e._v(" "),a("div",[e._v("文章：参数值填 ID，帖子：参数值填 ID ，H5：参数值填 完整链接，不触发则不填,跳转app页可选择community，release")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"60%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.addForm.img,callback:function(t){e.$set(e.addForm,"img",t)},expression:"addForm.img"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-preview":e.handlePictureCardPreview,"before-upload":e.beforeupload,"on-success":e.handleAvatarSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"type"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联参数",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入关联参数"},model:{value:e.addForm.url,callback:function(t){e.$set(e.addForm,"url",t)},expression:"addForm.url"}}),e._v(" "),a("div",[e._v("文章：参数值填 ID，帖子：参数值填 ID ，H5：参数值填 完整链接，不触发则不填,跳转app页可选择community，release")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(Y,G,!1,function(e){a("NKGU")},null,null).exports,ee={data:function(){return{form:{name:""},param:{act:"add",category:"3",title:"标题可不填",img:"./static/logo.png",url:"#",sort:"1"},title:"添加栏目",editForm:{act:"update",id:"",category:"3",title:"",img:"",status:"",url:"",sort:"",token:localStorage.getItem("logintoken")},addForm:{act:"add",category:"3",title:"",img:"",status:"",url:"",sort:"",token:localStorage.getItem("logintoken")},listStatus:[{id:1,name:"正常"},{id:2,name:"禁用"}],dialogImageUrl:"",editFormVisible:!1,addFormVisible:!1,loading:!1,imglist:[],rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},param1:{category:3},fileList:[],fileList2:[]}},created:function(){this.getdata(this.param1)},methods:{getdata:function(e){var t=this;this.loading=!0;var a={1:"正常",2:"禁用"};x(e).then(function(e){if(t.loading=!1,0===e.errcode){for(var i=e.data.imglist,s=i.length-1;s>=0;s--){var l=i[s].status;i[s].statusname=a[l]?a[l]:l}t.imglist=i}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("菜单加载失败，请稍后再试！")})},delRecord:function(e,t){var a=this,i={act:"upstatus",status:2,id:t.id};i.status=1==t.status?2:1;var s=1==t.status?"禁用":"显示";this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){b(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"资讯类别已删除!"}),a.getdata(a.param1)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("删除失败，请稍后再试！")})}).catch(function(e){console.log("err:",e)})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加栏目",this.type=2,this.addForm.title="",this.addForm.img="",this.addForm.url="",this.addForm.sort=1,this.addForm.status=1},submitAddForm:function(){var e=this;b(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改列别",this.type=1,this.editForm.id=t.id,this.editForm.title=t.title,this.editForm.sort=t.sort,this.editForm.img=t.img,this.editForm.url=t.url,this.editForm.status=t.status},submitEditForm:function(){var e=this;b(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1,this.addFormVisible=!1},submitUpload:function(){this.$refs.upload.submit()},handleAvatarSuccess:function(e,t,a){this.addForm.img=e.data},submitUpload2:function(){this.$refs.upload2.submit()},handleAvatarSuccess2:function(e,t,a){this.editForm.img=e.data}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("首页栏目列表")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加分类")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{margin:"20px"},attrs:{border:"","element-loading-text":"拼命加载中"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.imglist,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"名称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"img",label:"图标",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.img,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"链接"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusname",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("显示")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"40%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.editForm.img,callback:function(t){e.$set(e.editForm,"img",t)},expression:"editForm.img"}}),e._v(" "),a("el-upload",{ref:"upload2",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-success":e.handleAvatarSuccess2,"file-list":e.fileList2,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload2}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入链接"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"40%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"addForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"img"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入icon地址"},model:{value:e.addForm.img,callback:function(t){e.$set(e.addForm,"img",t)},expression:"addForm.img"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-success":e.handleAvatarSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入链接"},model:{value:e.addForm.url,callback:function(t){e.$set(e.addForm,"url",t)},expression:"addForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("JrWt")},null,null).exports,ie={data:function(){return{dialogImageUrl:"",dialogVisible:!1,loading:!1,title:"添加热搜",editForm:{act:"update",id:"",type:1,status:"",content:"",hot:0,sort:255,token:localStorage.getItem("logintoken")},addForm:{act:"add",type:1,status:1,content:"",hot:0,sort:255,token:localStorage.getItem("logintoken")},listStatus:[{id:1,name:"正常"},{id:2,name:"不显示"}],listType:[{id:1,name:"文章"},{id:2,name:"帖子"}],editFormVisible:!1,addFormVisible:!1,rules:{sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},datalist:[],param1:{category:2}}},created:function(){this.getdata(this.param1)},methods:{getdata:function(e){var t=this;this.loading=!0;var a,i={1:"正常",2:"不显示"},s={1:"文章",2:"帖子"};(a=e,h("post","/index.php/adm/index/hotsearchDo",a)).then(function(e){if(t.loading=!1,0===e.errcode){for(var a=e.data.datalist,l=a.length-1;l>=0;l--){var r=a[l].status;a[l].statusname=i[r]?i[r]:r;var o=a[l].type;a[l].statusname=s[o]?s[o]:o}t.datalist=a}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("数据加载失败，请稍后再试！"),console.log("err:",e)})},delRecord:function(e,t){var a=this,i={act:"upstatus",status:2,id:t.id};i.status=1==t.status?2:1;var s=1==t.status?"禁用":"显示";this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.param1)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作失败，请稍后再试！")})}).catch(function(e){console.log("err:",e)})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加热搜"},submitAddForm:function(){var e=this;$(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改热搜",this.editForm.id=t.id,this.editForm.type=t.type,this.editForm.content=t.content,this.editForm.status=t.status,this.editForm.hot=t.hot,this.editForm.sort=t.sort},submitEditForm:function(){var e=this;$(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.param1),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1,this.addFormVisible=!1}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("热搜榜管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加热搜")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"30px"},attrs:{border:"","element-loading-text":"拼命加载中"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{size:"small",data:e.datalist,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typename",label:"类型",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"热搜"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusname",label:"类型",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"hot",label:"热度",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("不显示")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("显示")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"60%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择类型"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"热搜词",prop:"content"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"热搜词"},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"热度",prop:"content"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"热度"},model:{value:e.editForm.hot,callback:function(t){e.$set(e.editForm,"hot",t)},expression:"editForm.hot"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"60%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择类型"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"热搜词",prop:"content"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"热搜词"},model:{value:e.addForm.content,callback:function(t){e.$set(e.addForm,"content",t)},expression:"addForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"热度",prop:"content"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"热度"},model:{value:e.addForm.hot,callback:function(t){e.$set(e.addForm,"hot",t)},expression:"addForm.hot"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)],1)},staticRenderFns:[]};var le=a("VU/8")(ie,se,!1,function(e){a("LVBX")},null,null).exports,re={render:function(){var e=this.$createElement;return(this._self._c||e)("el-pagination",{staticClass:"page-box",attrs:{background:"","current-page":this.childMsg.currentPage,"page-sizes":[10,20,30,40],"page-size":this.childMsg.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.childMsg.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})},staticRenderFns:[]};var oe=a("VU/8")({name:"Pagination",props:["childMsg"],data:function(){return{pageparm:{currentPage:this.childMsg.currentPage,pageSize:this.childMsg.pageSize}}},created:function(){},methods:{handleSizeChange:function(e){this.pageparm.pageSize=e,this.$emit("callFather",this.pageparm)},handleCurrentChange:function(e){this.pageparm.currentPage=e,this.$emit("callFather",this.pageparm)}}},re,!1,function(e){a("NFa4")},null,null).exports,ne={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",formInline:{page:1,token:localStorage.getItem("logintoken")},searchParam:{act:"get",keywords:"",cate_id:"all"},userparm:[],listData:[],listCate:[],cateId:"all",pageparm:{currentPage:1,pageSize:20,total:1}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this,i={1:"文章",2:"音频",3:"视频"},s={1:"上架",2:"下架"};this.loading=!0,e.pagesize=e.pagesize?e.pagesize:this.pageparm.pageSize,(t=e,h("post","/index.php/adm/News/newsList",t)).then(function(e){if(a.loading=!1,10006==e.errcode)return a.$store.commit("logout","false"),a.$router.push({path:"/login"}),!1;if(0===e.errcode){for(var t=e.data.contentlist,l=t.length-1;l>=0;l--){var r=t[l].type;t[l].type=i[r]?i[r]:r;var o=t[l].status;t[l].statusname=s[o]?s[o]:o}a.listData=t,a.listCate=e.data.cate_list,a.searchParam.cate_id=e.data.cate_id,a.pageparm.currentPage=e.data.current_page,a.pageparm.total=e.data.total_count}else a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.searchParam)},handleEdit:function(e,t,a){this.$router.push({path:"/News/editNews?id="+t.id})},handleAdd:function(e){this.$router.push({path:"/News/editNews"})},toComment:function(e,t){p()(t);this.$router.push({path:"/News/news_comment?id="+t.id})},deleteUser:function(e,t){var a=this,i={act:"delete",id:t};this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){F(i).then(function(e){0==e.errcode?(a.$message({type:"success",message:"该资讯已下架成功!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("资讯配置信息下架失败，请稍后再试！")})}).catch(function(){})},upStatus:function(e,t){var a=this,i={act:"status",id:t.id,status:2},s="下架";2==t.status&&(i.status=1,s="上架"),this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){F(i).then(function(e){0==e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},formatText:function(e,t,a,i){var s=this.decodeUnicode(a);s&&(s=JSON.parse(s));var l=s[0].text?s[0].text:s[1].text;return l=l.slice(0,20)+"..."},decodeUnicode:function(e){return e=e.replace(/\\/g,"%"),unescape(e)}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("资讯管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加资讯")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.searchParam}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.searchParam.cate_id,callback:function(t){e.$set(e.searchParam,"cate_id",t)},expression:"searchParam.cate_id"}},e._l(e.listCate,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入标题关键词"},model:{value:e.searchParam.keywords,callback:function(t){e.$set(e.searchParam,"keywords",t)},expression:"searchParam.keywords"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:""},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"66"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"cate_name",label:"类别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"title",label:"标题","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"imgs",label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.imgs,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"author_name",label:"作者",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"time_create",label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"statusname",label:"状态",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"loves",label:"点赞量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"views",label:"浏览量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"comment",label:"评论量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.toComment(t.$index,t.row)}}},[e._v("查看评论")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row.id)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.upStatus(t.$index,t.row)}}},[e._v(e._s(1==t.row.status?"下架":"上架"))]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row,2)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var me=a("VU/8")(ne,de,!1,function(e){a("NpZO")},"data-v-68526178",null).exports,ce=a("Dd8w"),ue=a.n(ce),pe=a("bOdI"),ge=a.n(pe),fe=a("Zx67"),he=a.n(fe),ve=a("Zrlr"),be=a.n(ve),_e=a("wxAW"),Fe=a.n(_e),ye=a("zwoO"),we=a.n(ye),ke=a("yEsh"),xe=a.n(ke),$e=a("Pf15"),ze=a.n($e),Se=a("G0J2"),Ie=(a("3f40"),a("4qOc"),a("+cgv"),Se.Quill.import("blots/block/embed")),De=Se.Quill.import("formats/link"),Ce=function(e){function t(){return be()(this,t),we()(this,(t.__proto__||he()(t)).apply(this,arguments))}return ze()(t,e),Fe()(t,null,[{key:"create",value:function(e){var a=xe()(t.__proto__||he()(t),"create",this).call(this,e);return a.setAttribute("controls","controls"),a.setAttribute("src",this.sanitize(e)),a}},{key:"sanitize",value:function(e){return De.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(Ie);Ce.blotName="audio",Ce.tagName="audio",Se.Quill.register(Ce);var Ae=[["image","video"],["audio"]],Me={data:function(){var e;return{fileList1:[],fileList2:[],fileList3:[],content:this.value,quillUpdateImg:!1,height:500,listData:{id:0,type:1,cate_id:0,title:"",content:"",topimgs:"",imgs:"",labels:"",sort:1,status:1},param:{act:"update",type:1,cate_id:0,title:"",content:"",topimgs:"",imgs:"",labels:"",sort:1,status:1},listCate:[{id:0,name:"请选择类别"}],listType:[{id:1,name:"文章"},{id:3,name:"视频"},{id:2,name:"音频"}],editorOption:(e={placeholder:"",theme:"snow"},ge()(e,"placeholder","请输入内容"),ge()(e,"modules",{toolbar:{container:Ae,handlers:{image:function(e){e?document.querySelector(".avatar-uploader input").click():this.quill.format("image",!1)}}}}),e),serverUrl:"/index.php/adm/index/upLoadImg",header:{token:localStorage.getItem("logintoken")}}},components:{quillEditor:Se.quillEditor},created:function(){},props:{value:{type:String},maxSize:{type:Number,default:4e3}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.editor.container.style.height=this.height+"px",this.pageInit(),this.getCateList(),this.audioButton()},methods:{pageInit:function(){var e=this.$route.query;e.id&&(this.listData.id=e.id,this.getdata())},getdata:function(){var e=this;if(this.listData.id<1)return!1;_({id:this.listData.id}).then(function(t){if(0===t.errcode){var a=t.data.news;e.listData={id:a.id,type:a.type,cate_id:a.cate_id,title:a.title,content:a.content,topimgs:a.topimgs,imgs:a.imgs,labels:a.labels,sort:a.sort,status:a.status},a.imgs&&(e.fileList1=[{name:"标题图",url:a.imgs}]),a.topimgs&&(e.fileList2=[{name:"详情顶图",url:a.topimgs}]);for(var i="",s=JSON.parse(a.content).map(function(e){return ue()({},e,{src:e.src&&e.src.replace(/\\/g,"")||""})}),l=0;l<s.length;l++)"text"==s[l].type?i=i+"<p>"+s[l].text+"</p>":"img"==s[l].type?i=i+"<img src="+s[l].src+" width="+s[l].width+" height="+s[l].height+">":"video"==s[l].type?i=i+'<iframe class="ql-video" frameborder="0" allowfullscreen="true" src="'+s[l].src+'"></iframe>':"audio"==s[l].type&&(i=i+'<audio controls="controls" src="'+s[l].src+'"></audio>');e.content=i,console.log("res:",t)}else e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.loading=!1,e.$message.error("数据获取失败，请稍后再试！")})},getCateList:function(){var e=this;y(this.ruleForm).then(function(t){if(0==t.errcode){for(var a=t.data.catelist,i=[],s=a.length-1;s>=0;s--)1!=a[s].status&&e.listData.cate_id!=a[s].id||i.push(a[s]);e.listCate=i}else e.$message.error(t.errmsg)})},audioButton:function(){var e=document.querySelector(".ql-audio");e.classList.add("fa"),e.classList.add("fa-file-audio-o")},onEditorBlur:function(e){e.quill,e.html,e.text},onEditorFocus:function(){},onEditorChange:function(e){e.quill;var t=e.html;e.text;this.$emit("input",this.content),this.content=t},beforeUpload:function(e){this.quillUpdateImg=!0},uploadSuccess:function(e,t){var a=e.data.replace("http://xinwei-oss-aliyun.oss-cn-beijing.aliyuncs.com/",""),i=this.$refs.myQuillEditor.quill;if(0==e.errcode){var s=i.getSelection().index;i.insertEmbed(s,"image",e.data);var l=new Image;l.src=e.data,l.onload=function(){console.log("width:"+l.width+",height:"+l.height);var t=i.getContents();t.ops=t.ops.map(function(t){return t.insert.image&&t.insert.image==e.data&&(t.attributes={height:l.height,width:l.width,name:a}),t}),i.setContents(t),i.setSelection(s+1)}}else this.$message.error("图片插入失败");this.quillUpdateImg=!1},uploadError:function(){this.quillUpdateImg=!1,this.$message.error("图片插入失败")},saveHtml:function(){var e=this,t=this;t.param=t.listData,t.listData.id>0?t.param.act="update":t.param.act="add";var a=this.$refs.myQuillEditor.quill.getContents();a=a.ops;for(var i=[],s=0;s<a.length;s++)if(a[s].insert.image)i.push({type:"img",src:a[s].insert.image,width:a[s].attributes.width,height:a[s].attributes.height});else if(a[s].insert.video)i.push({type:"video",src:a[s].insert.video});else if(a[s].insert.audio)i.push({type:"audio",src:a[s].insert.audio});else if("string"==typeof a[s].insert){var l=a[s].insert.replace(/\n/g,"<br>").split("<br>"),r=0;for(r=0;r<l.length-1;r++)i.push({type:"text",text:l[r]})}else console.log("err:delta[i]:",a[s]);t.param.content=p()(i),_(t.param).then(function(a){0===a.errcode?(t.$message({type:"success",message:"update"==t.param.act?"编辑成功":"保存成功"}),e.$router.push({path:"/News/News"})):t.$message({type:"info",message:a.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("操作失败，请稍后再试！")})},filter:function(e){var t=/(<p>|<\/p>)/g,a=/<img.*?(?:>|\/>)/gi,i=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,s=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,l=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,r=e.replace(t,"").match(a);""!=r&&null!=r&&r.map(function(e){return{type:"img",src:e.match(i)&&e.match(i)[1]||0,width:e.match(s)&&e.match(i)[1]||0,height:e.match(l)&&e.match(i)[1]||0}});var o=0;return e.replace(t,"<text>").replace(a,"<img>").split("<text>").map(function(e){return{type:"text",text:e}}).filter(function(e){return e.text}).reduce(function(e,t){return t.text.includes("img")&&o<r.length?(t.text.indexOf("<img>")?e.push(ue()({},t,{text:t.text.replace("<img>","")}),r[o]):e.push(r[o],ue()({},t,{text:t.text.replace("<img>","")})),o++):e.push(t),e},[])},handleRemove:function(e,t){console.log(e,t)},submitUpload:function(){this.$refs.upload.submit()},handleImgsSuccess:function(e,t,a){this.listData.imgs=e.data},submitTopUpload:function(){this.$refs.topupload.submit()},handleTopSuccess:function(e,t,a){this.listData.topimgs=e.data}}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/News/News"}}},[e._v("资讯管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("资讯编辑")])],1),e._v(" "),a("div",{staticStyle:{width:"75%","margin-top":"50px"}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.listData}},[a("el-form-item",{attrs:{label:"资讯标题",prop:"permissionName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"标题必填"},model:{value:e.listData.title,callback:function(t){e.$set(e.listData,"title",t)},expression:"listData.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标签",prop:"permissionName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"逗号分隔"},model:{value:e.listData.labels,callback:function(t){e.$set(e.listData,"labels",t)},expression:"listData.labels"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"permissionName"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.listData.type,callback:function(t){e.$set(e.listData,"type",t)},expression:"listData.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类别",prop:"permissionName"}},[a("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.listData.cate_id,callback:function(t){e.$set(e.listData,"cate_id",t)},expression:"listData.cate_id"}},e._l(e.listCate,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"permissionName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:""},model:{value:e.listData.sort,callback:function(t){e.$set(e.listData,"sort",t)},expression:"listData.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题图"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.listData.imgs,callback:function(t){e.$set(e.listData,"imgs",t)},expression:"listData.imgs"}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-success":e.handleImgsSuccess,"file-list":e.fileList1,"auto-upload":!1,"list-type":"picture"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详情顶图"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.listData.topimgs,callback:function(t){e.$set(e.listData,"topimgs",t)},expression:"listData.topimgs"}}),e._v(" "),a("el-upload",{ref:"topupload",staticClass:"upload-demo",attrs:{action:"/index.php/adm/index/upLoadImg",name:"img",limit:1,"on-success":e.handleTopSuccess,"file-list":e.fileList2,"auto-upload":!1,"list-type":"picture"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitTopUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"资讯内容"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.serverUrl,name:"img",headers:e.header,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"file-list":e.fileList3,"before-upload":e.beforeUpload}}),e._v(" "),a("div",[a("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.saveHtml}},[e._v("保存")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Te=a("VU/8")(Me,Ve,!1,function(e){a("uQfq")},"data-v-d4c4a42e",null).exports,Pe={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,addFormVisible:!1,title:"添加",type:0,editForm:{act:"update",id:"",name:"",status:"",sort:"",token:localStorage.getItem("logintoken")},addForm:{act:"add",name:"",status:"",sort:"",token:localStorage.getItem("logintoken")},searchParam:{act:"get",id:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},formInline:{},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],listStatus:[{id:1,name:"正常"},{id:2,name:"禁用"}],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=this;this.loading=!0;var a={1:"正常",2:"禁用"};y(e).then(function(e){if(t.loading=!1,0===e.errcode){for(var i=e.data.catelist,s=i.length-1;s>=0;s--){var l=i[s].status;i[s].statusname=a[l]?a[l]:l}t.listData=i}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("获取数据失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.searchParam)},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改类别",this.type=1,this.editForm.id=t.id,this.editForm.name=t.name,this.editForm.sort=t.sort,this.editForm.status=t.status},submitEditForm:function(){var e=this;console.log("editData:",this.editForm),w(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.formInline),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加类别",this.type=2,this.addForm.id="",this.addForm.name="",this.addForm.sort=1,this.addForm.status=1},submitAddForm:function(){var e=this;w(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.formInline),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},deleteUser:function(e,t){var a=this,i={act:"status",id:t.id},s="启动用";i.status=1,1==t.status&&(s="禁用",i.status=2),this.$confirm("确定要"+s+"吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){w(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作失败，请稍后再试！")})}).catch(function(){})},closeDialog:function(){this.addFormVisible=!1,this.editFormVisible=!1}}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("资讯分类管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加分类")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"statusname",label:"状态",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("启用")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"30%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)},staticRenderFns:[]};var Re=a("VU/8")(Pe,Ne,!1,function(e){a("A+82")},"data-v-585f06c9",null).exports,Ue={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",param:{news_id:0},detailData:{title:"",views:"",loves:"",comment:"",author_name:"",author_headimg:""},head_img:"",listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){},mounted:function(){this.pageInit()},methods:{pageInit:function(){var e=this.$route.query;this.param.news_id=e.id,this.getdata(this.param)},getdata:function(e){var t,a=this;this.loading=!0,(t=e,h("post","/index.php/adm/News/commentList",t)).then(function(e){a.loading=!1,0===e.errcode?a.listData=e.data.commentlist:a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.getataList(this.formInline)},deleteCommont:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},h("post","/index.php/adm/News/commentDel",e)).then(function(e){e.errcode?(a.$message({type:"success",message:"删除成功!"}),a.getdata(a.param)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){console.log("err:",e),a.loading=!1,a.$message.error("删除失败，请稍后再试！")})}).catch(function(e){console.log("err:",e),a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},Ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",{attrs:{to:{path:"/News/News"}}},[e._v("资讯列表")]),e._v(" "),i("el-breadcrumb-item",[e._v("资讯评论列表")])],1),e._v(" "),i("div",{staticStyle:{padding:"30px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"news_id",label:"资讯ID",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"member_name",label:"昵称",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"menber_heading",label:"成员头像",width:"150"}},[i("img",{staticClass:"table_img",attrs:{src:a("dLd/"),alt:""}})]),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"comment",label:"评论时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"comment",label:"评论内容","min-width":"200"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteCommont(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]};var qe=a("VU/8")(Ue,Ee,!1,function(e){a("VhZ2")},"data-v-2836345e",null).exports,Be={data:function(){return{id:0,nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",searchParam:{act:"get",keywords:""},formInline:{page:"1"},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:5,total:1}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,e.pagesize=this.pageparm.pageSize,(t=e,h("post","/index.php/adm/Community/index",t)).then(function(e){a.loading=!1,0===e.errcode?(a.listData=e.data.contentlist,a.pageparm.currentPage=e.data.current_page,a.pageparm.total=e.data.total_count):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.searchParam)},delRecord:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id,status:"-1"},h("post","/index.php/adm/Community/editdo",e)).then(function(e){0===e.errcode?(a.$message({type:"success",message:"已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("删除失败，请稍后再试！")})}).catch(function(){})},toComment:function(e,t){this.$router.push({path:"/talks/talk_detail?id="+t.id})}}},Le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("社区内容管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.searchParam}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入内容关键词"},model:{value:e.searchParam.keywords,callback:function(t){e.$set(e.searchParam,"keywords",t)},expression:"searchParam.keywords"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"内容","min-width":"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"audio_video_img",label:"视频 || 图片",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.audio_video?a("video",{attrs:{src:t.row.audio_video,controls:"controls"}},[e._v("您的浏览器不支持 video 标签。")]):e._e(),e._v(" "),t.row.img?a("img",{staticClass:"table_img",attrs:{src:t.row.img,alt:""}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"author_id",label:"作者",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"loves",label:"点赞量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"views",label:"浏览量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"comment",label:"评论量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"time_create",label:"发布时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.toComment(t.$index,t.row)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delRecord(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var He=a("VU/8")(Be,Le,!1,function(e){a("w87D")},"data-v-1a61a908",null).exports,Oe={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",detailParam:{id:0},detailData:{},listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.detailParam)},mounted:function(){this.pageInit()},methods:{pageInit:function(){var e=this.$route.query;this.detailParam.id=e.id},getdata:function(e){var t,a=this;this.loading=!0,(t=e,h("post","/index.php/adm/Community/detail",t)).then(function(e){a.loading=!1,0===e.errcode?(a.detailData=e.data.community,a.listData=e.data.commentlist):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("数据加载失败，请稍后再试！")})},deleteCommont:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},h("post","/index.php/adm/Community/commentDel",e)).then(function(e){0==e.errcode?(a.$message({type:"success",message:"评论已删除!"}),a.getdata(a.detailParam)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("删除！")})}).catch(function(){})}}},Qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/talks/talks"}}},[e._v("社区内容管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("社区内容详情")])],1),e._v(" "),a("div",{staticStyle:{margin:"50 200 50 50"}},[a("div",{staticClass:"detail"},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"内容："}},[a("label",{staticClass:"label-text"},[e._v(e._s(e.detailData.title))])]),e._v(" "),a("el-form-item",{attrs:{label:"图片："}},[e.detailData.img?a("label",{staticClass:"label-text"},e._l(e.detailData.img,function(e){return a("div",{key:e,staticClass:"imgli"},[a("img",{attrs:{src:e,alt:""}})])}),0):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"视频："},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"video"},[e.detailData.audio_video?a("video",{attrs:{src:e.detailData.audio_video,controls:"controls"}},[e._v("您的浏览器不支持 video 标签。")]):e._e()])}}])}),e._v(" "),a("el-form-item",{attrs:{label:"浏览量: "}},[a("label",{staticClass:"label-text"},[e._v(e._s(e.detailData.views))])]),e._v(" "),a("el-form-item",{attrs:{label:"评论量: "}},[a("label",{staticClass:"label-text"},[e._v(e._s(e.detailData.comment))])]),e._v(" "),a("el-form-item",{attrs:{label:"点赞量: "}},[a("label",{staticClass:"label-text"},[e._v(e._s(e.detailData.loves))])]),e._v(" "),a("el-form-item",{attrs:{label:"标签: "}},[a("label",{staticClass:"label-text"},[e._v(e._s(e.detailData.labels))])]),e._v(" "),a("el-form-item",{attrs:{label:"作者: "}},[a("label",{staticClass:"label-text"},[e._v(e._s(e.detailData.author_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"作者头像: "}},[a("img",{attrs:{src:e.detailData.author_headimg,width:"80"}})]),e._v(" "),a("el-form-item",{attrs:{label:"评论列表: "}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_name",label:"评论者昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_heading",label:"评论者头像",width:"90"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.member_headimg,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"评论内容","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"评论时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteCommont(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)])],1)},staticRenderFns:[]};var Ke=a("VU/8")(Oe,Qe,!1,function(e){a("sPBT")},"data-v-2b675083",null).exports,je={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,addFormVisible:!1,title:"添加基础标签",type:2,editForm:{act:"update",id:"",name:"",status:"",sort:"",token:localStorage.getItem("logintoken")},addForm:{act:"add",name:"",status:1,sort:"",token:localStorage.getItem("logintoken")},searchParam:{act:"get",id:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},formInline:{},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],listStatus:[{id:1,name:"正常"},{id:2,name:"禁用"}],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,e.pagesize=this.pageparm.pageSize,(t=e,h("post","/index.php/adm/Community/labelList",t)).then(function(e){a.loading=!1,0===e.errcode?(a.listData=e.data.labellist,a.pageparm.currentPage=e.data.current_page,a.pageparm.total=e.data.total_count):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("资讯类别列表失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.searchParam)},handleEdit:function(e,t){this.editFormVisible=!0,this.title="修改基础标签",this.type=1,this.editForm.id=t.id,this.editForm.name=t.name,this.editForm.sort=t.sort,this.editForm.status=t.status},submitEditForm:function(){var e=this;k(this.editForm).then(function(t){e.editFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.formInline),e.$message({type:"success",message:"保存成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.editFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},handleAdd:function(e,t){this.addFormVisible=!0,this.title="添加基础标签",this.type=2,this.addForm.id="",this.addForm.name="",this.addForm.sort="",this.addForm.status=1},submitAddForm:function(){var e=this;k(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.formInline),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},deleteUser:function(e,t){var a=this,i={act:"delete",id:t.id};this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){k(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:"已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("社区基础标签")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加基础标签")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"状态",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sort",label:"排序值",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitEditForm()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"30%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1)],1)},staticRenderFns:[]};var Je=a("VU/8")(je,We,!1,function(e){a("t4/9")},"data-v-3cf0ecac",null).exports,Xe={data:function(){return{nshow:!0,fshow:!1,loading:!1,addFormVisible:!1,title:"添加",addForm:{act:"add",name:"",status:"",sort:"",token:localStorage.getItem("logintoken")},formInline:{keywords:"",token:localStorage.getItem("logintoken")},listData:[],listUser:[],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,(t=e,h("post","/index.php/adm/Member/admin",t)).then(function(e){if(a.loading=!1,10006==e.errcode)return a.$store.commit("logout","false"),a.$router.push({path:"/login"}),!1;0===e.errcode?(a.listData=e.data.memberlist,a.pageparm.currentPage=e.data.current_page,a.pageparm.total=e.data.total_count):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,console.log("err:",e),a.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleAddd:function(e,t){this.addFormVisible=!0,this.title="添加管理员"},submitAddForm:function(){var e=this;cateDo(this.addForm).then(function(t){e.addFormVisible=!1,e.loading=!1,0===t.errcode?(e.getdata(e.formInline),e.$message({type:"success",message:"新增成功！"})):e.$message({type:"info",message:t.errmsg})}).catch(function(t){e.addFormVisible=!1,e.loading=!1,e.$message.error("保存失败，请稍后再试！")})},deleteUser:function(e,t){var a=this;this.$confirm("确定要取消"+t.name+"的管理身份吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},h("post","/index.php/adm/Member/deladmin",e)).then(function(e){0==e.errcode?(a.$message({type:"success",message:"操作成功!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},closeDialog:function(){this.addFormVisible=!1},dateFormat:function(e,t){var a=e[t.property];return void 0==a?"":moment(a).format("YYYY-MM-DD HH:mm:ss")}}},Ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("管理员管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入账号或昵称"},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"昵称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"headimg",label:"头像",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.headimg,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sex",label:"性别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"province",label:"省份",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"city",label:"城市",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"age",label:"年龄",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"time_create",label:"新增时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("取消管理身份")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible,width:"30%"},on:{"update:visible":function(t){e.addFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入排序值"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.listUser,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitAddForm()}}},[e._v("新增")])],1)],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var Ge=a("VU/8")(Xe,Ye,!1,function(e){a("PqPu")},"data-v-e13857ee",null).exports,Ze={data:function(){return{nshow:!0,fshow:!1,loading:!1,formInline:{keywords:"",token:localStorage.getItem("logintoken")},listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,(t=e,h("post","/index.php/adm/Member/index",t)).then(function(e){if(a.loading=!1,10006==e.errcode)return a.$store.commit("logout","false"),a.$router.push({path:"/login"}),!1;0===e.errcode?(a.listData=e.data.memberlist,a.pageparm.currentPage=e.data.current_page,a.pageparm.total=e.data.total_count):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,console.log("err:",e),a.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},setAdmin:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},h("post","/index.php/adm/Member/setadmin",e)).then(function(e){0===e.errcode?(a.$message({type:"success",message:"设置成功，请到管理员列表查询!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("设置失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消"})})},closeDialog:function(){this.editFormVisible=!1}}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入账号或昵称"},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"昵称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"headimg",label:"头像",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.headimg,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sex",label:"性别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"province",label:"省份",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"city",label:"城市",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"age",label:"年龄",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"time_create",label:"新增时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.setAdmin(t.$index,t.row)}}},[e._v("设为管理员")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var tt=a("VU/8")(Ze,et,!1,function(e){a("xIjp")},"data-v-6dbe2f89",null).exports,at={data:function(){return{formInline:{keywords:"",token:localStorage.getItem("logintoken")},listData:[],dialogType:{addMessage:!1,editMessage:!1},ruleForm:{addMessage:{device_type:1,type:1,title:"",content:"",push_time:"",push_status:1,push_users:"@all",push_users_type:1,link:"",labels:"",province:"",activity:""},editMessage:{id:0,device_type:1,type:1,title:"",content:"",push_time:"",push_status:1,push_users:"",push_users_type:"",time_modify:"",time_create:"",link:"",labels:"",province:"",activity:""}},rules:{addMessage:{content:[{required:!0,message:"推送内容必填",trigger:"change"}],push_users:[]},editMessage:{content:[{required:!0,message:"推送内容必填",trigger:"change"}],push_users:[]}},listLabels:[{id:1,name:"时尚"},{id:2,name:"民族风"},{id:3,name:"简约"},{id:4,name:"科技"}],listProvince:[{id:1,name:"广东"},{id:2,name:"广西"},{id:3,name:"北京"},{id:4,name:"上海"},{id:5,name:"江苏"}],listActivity:[{id:1,name:"最近活跃"},{id:2,name:"不活跃"},{id:3,name:"近一周活跃"},{id:4,name:"近一个月活跃"}],listType:[{id:1,name:"文本"},{id:2,name:"应用页"},{id:3,name:"H5页"}],pageparm:{currentPage:1,pageSize:20,total:10},pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=this;this.loading=!0,I(e).then(function(e){if(t.loading=!1,10006==e.errcode)return t.$store.commit("logout","false"),t.$router.push({path:"/login"}),!1;if(0===e.errcode){var a=e.data.datalist;t.listData=a,t.pageparm.currentPage=e.data.current_page,t.pageparm.total=e.data.total_count}else t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,console.log("err:",e),t.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},changeUsersType:function(e){"addMessage"&&(this.ruleForm.addMessage.push_users=1==this.ruleForm.addMessage.push_users_type?"@all":""),"editMessage"&&(this.ruleForm.editMessage.push_users=1==this.ruleForm.editMessage.push_users_type?"@all":"")},handleAction:function(e){"创建"==e.action&&(this.dialogType.addMessage=!0),"编辑"==e.action&&(this.ruleForm.editMessage.id=e.id,this.ruleForm.editMessage.title=e.title,this.ruleForm.editMessage.id=e.id,this.ruleForm.editMessage.content=e.content,this.ruleForm.editMessage.push_time=e.push_time,this.ruleForm.editMessage.push_status=e.push_status,this.ruleForm.editMessage.push_users=e.push_users,this.ruleForm.editMessage.time_modify=e.time_modify,this.ruleForm.editMessage.time_create=e.time_create,this.ruleForm.editMessage.link=e.link,this.dialogType.editMessage=!0)},cancelForm:function(){this.dialogType.addMessage=!1,this.dialogType.editMessage=!1},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if("addMessage"==t){var i=a.ruleForm.addMessage;i.act="add",I(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:e.errmsg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作，请稍后再试！")})}if("editMessage"==t){var s=a.ruleForm.editMessage;s.act="update",I(s).then(function(e){0===e.errcode?(a.$message({type:"success",message:e.errmsg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作，请稍后再试！")})}a.dialogType[t]=!1})}}},it={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("消息推送任务")])],1),e._v(" "),a("el-form",{staticClass:"user-search"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAction({action:"创建"})}}},[e._v("创建推送任务")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"type",label:"消息类型",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"推送标题",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"消息内容",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"push_time",label:"推送时间",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"push_status",label:"推送状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"push_users",label:"推送对象"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_modify",label:"更新时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_modify)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleAction(t.row)}}},[e._v(e._s(t.row.action))])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑推送",visible:e.dialogType.editMessage,width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogType,"editMessage",t)}}},[a("el-form",{ref:"editMessageForm",attrs:{"label-width":"120px",model:e.ruleForm.editMessage,rules:e.rules.editMessage}},[a("el-form-item",{attrs:{label:"设备类型",prop:"device_type"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.ruleForm.editMessage.device_type,callback:function(t){e.$set(e.ruleForm.editMessage,"device_type",t)},expression:"ruleForm.editMessage.device_type"}},[a("el-radio",{attrs:{label:1}},[e._v("Android")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("IOS")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"消息类型",prop:"type"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",disabled:""},model:{value:e.ruleForm.editMessage.type,callback:function(t){e.$set(e.ruleForm.editMessage,"type",t)},expression:"ruleForm.editMessage.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推送标题",prop:"title"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入标题"},model:{value:e.ruleForm.editMessage.title,callback:function(t){e.$set(e.ruleForm.editMessage,"title",t)},expression:"ruleForm.editMessage.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消息内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"",autosize:{minRows:2,maxRows:4}},model:{value:e.ruleForm.editMessage.content,callback:function(t){e.$set(e.ruleForm.editMessage,"content",t)},expression:"ruleForm.editMessage.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送时间",prop:"push_time"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions1,placeholder:"请选择日期"},model:{value:e.ruleForm.editMessage.push_time,callback:function(t){e.$set(e.ruleForm.editMessage,"push_time",t)},expression:"ruleForm.editMessage.push_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标人群",prop:"push_users"}},[a("el-radio-group",{on:{change:function(t){return e.changeUsersType("editMessage")}},model:{value:e.ruleForm.editMessage.push_users_type,callback:function(t){e.$set(e.ruleForm.editMessage,"push_users_type",t)},expression:"ruleForm.editMessage.push_users_type"}},[a("el-radio",{attrs:{label:1}},[e._v("全部用户")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("部分用户")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("独立用户")])],1),e._v(" "),2==e.ruleForm.editMessage.push_users_type?[a("div",[e._v("普通筛选条件:")]),e._v(" "),a("div",[a("div",[e._v("\n                标    签：\n                "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.editMessage.labels,callback:function(t){e.$set(e.ruleForm.editMessage,"labels",t)},expression:"ruleForm.editMessage.labels"}},e._l(e.listLabels,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",[e._v("\n                省   份：\n                "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.editMessage.province,callback:function(t){e.$set(e.ruleForm.editMessage,"province",t)},expression:"ruleForm.editMessage.province"}},e._l(e.listProvince,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",[e._v("\n                活跃度：\n                "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.editMessage.activity,callback:function(t){e.$set(e.ruleForm.editMessage,"activity",t)},expression:"ruleForm.editMessage.activity"}},e._l(e.listActivity,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)])]:e._e(),e._v(" "),3==e.ruleForm.editMessage.push_users_type?[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.editMessage.push_users,callback:function(t){e.$set(e.ruleForm.editMessage,"push_users",t)},expression:"ruleForm.editMessage.push_users"}},[a("template",{slot:"prepend"},[e._v("Device Token")])],2)]:e._e()],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelForm("editMessageForm","editMessage")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("editMessageForm","editMessage")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增推送",visible:e.dialogType.addMessage,width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogType,"addMessage",t)}}},[a("el-form",{ref:"addMessageForm",attrs:{"label-width":"120px",model:e.ruleForm.addMessage,rules:e.rules.addMessage}},[a("el-form-item",{attrs:{label:"设备类型",prop:"device_type"}},[a("el-radio-group",{model:{value:e.ruleForm.addMessage.device_type,callback:function(t){e.$set(e.ruleForm.addMessage,"device_type",t)},expression:"ruleForm.addMessage.device_type"}},[a("el-radio",{attrs:{label:1}},[e._v("Android")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("IOS")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"消息类型",prop:"type"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.ruleForm.addMessage.type,callback:function(t){e.$set(e.ruleForm.addMessage,"type",t)},expression:"ruleForm.addMessage.type"}},e._l(e.listType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推送标题",prop:"title"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入标题"},model:{value:e.ruleForm.addMessage.title,callback:function(t){e.$set(e.ruleForm.addMessage,"title",t)},expression:"ruleForm.addMessage.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消息内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"",autosize:{minRows:2,maxRows:4}},model:{value:e.ruleForm.addMessage.content,callback:function(t){e.$set(e.ruleForm.addMessage,"content",t)},expression:"ruleForm.addMessage.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送时间",prop:"push_time"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"2019-07-09 00:00:00","picker-options":e.pickerOptions1,placeholder:"请选择日期"},model:{value:e.ruleForm.addMessage.push_time,callback:function(t){e.$set(e.ruleForm.addMessage,"push_time",t)},expression:"ruleForm.addMessage.push_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标人群",prop:"push_users"}},[a("el-radio-group",{on:{change:function(t){return e.changeUsersType("addMessage")}},model:{value:e.ruleForm.addMessage.push_users_type,callback:function(t){e.$set(e.ruleForm.addMessage,"push_users_type",t)},expression:"ruleForm.addMessage.push_users_type"}},[a("el-radio",{attrs:{label:1}},[e._v("全部用户")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("部分用户")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("独立用户")])],1),e._v(" "),2==e.ruleForm.addMessage.push_users_type?[a("div",[e._v("普通筛选条件:")]),e._v(" "),a("div",[a("div",[e._v("\n                标    签：\n                "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.addMessage.labels,callback:function(t){e.$set(e.ruleForm.addMessage,"labels",t)},expression:"ruleForm.addMessage.labels"}},e._l(e.listLabels,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",[e._v("\n                省   份：\n                "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.addMessage.province,callback:function(t){e.$set(e.ruleForm.addMessage,"province",t)},expression:"ruleForm.addMessage.province"}},e._l(e.listProvince,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",[e._v("\n                活跃度：\n                "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.addMessage.activity,callback:function(t){e.$set(e.ruleForm.addMessage,"activity",t)},expression:"ruleForm.addMessage.activity"}},e._l(e.listActivity,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)])]:e._e(),e._v(" "),3==e.ruleForm.addMessage.push_users_type?[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.addMessage.push_users,callback:function(t){e.$set(e.ruleForm.addMessage,"push_users",t)},expression:"ruleForm.addMessage.push_users"}},[a("template",{slot:"prepend"},[e._v("Device Token")])],2)]:e._e()],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelForm("addMessageForm","addMessage")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("addMessageForm","addMessage")}}},[e._v("保存")])],1)],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var st=a("VU/8")(at,it,!1,function(e){a("8D4q")},"data-v-06e2f64c",null).exports,lt={data:function(){return{formInline:{device_type:"0",keywords:"",token:localStorage.getItem("logintoken")},listData:[],loading:!1,pageparm:{currentPage:1,pageSize:20,total:10},pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,(t=e,h("post","/index.php/adm/index/memberDevice",t)).then(function(e){if(a.loading=!1,10006==e.errcode)return a.$store.commit("logout","false"),a.$router.push({path:"/login"}),!1;if(0===e.errcode){var t=e.data.datalist;a.listData=t,a.pageparm.currentPage=e.data.current_page,a.pageparm.total=e.data.total_count}else a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,console.log("err:",e),a.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},cancelForm:function(){this.dialogType.addMessage=!1,this.dialogType.editMessage=!1},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if("addMessage"==t){var i=a.ruleForm.addMessage;i.act="add",messagePushDo(i).then(function(e){0===e.errcode?(a.$message({type:"success",message:e.errmsg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作，请稍后再试！")})}if("editMessage"==t){var s=a.ruleForm.editMessage;s.act="update",messagePushDo(s).then(function(e){0===e.errcode?(a.$message({type:"success",message:e.errmsg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作，请稍后再试！")})}a.dialogType[t]=!1})}}},rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户设备列表")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"设备："}},[a("el-select",{attrs:{placeholder:""},model:{value:e.formInline.device_type,callback:function(t){e.$set(e.formInline,"device_type",t)},expression:"formInline.device_type"}},[a("el-option",{attrs:{label:"请选择设备类型",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"Android",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"IOS",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{attrs:{size:"small",placeholder:"输入member_id"},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"member_id",label:"用户ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device_token",label:"device token",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device_type",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subscribe",label:"订阅状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_modify",label:"更新时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_modify)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"time_create",label:"添加时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var ot=a("VU/8")(lt,rt,!1,function(e){a("XeDv")},"data-v-08c6b9e5",null).exports,nt={data:function(){return{nshow:!0,fshow:!1,loading:!1,formInline:{keywords:"",token:localStorage.getItem("logintoken")},listData:[],pageparm:{currentPage:1,pageSize:20,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=this;this.loading=!0,S(e).then(function(e){if(t.loading=!1,10006==e.errcode)return t.$store.commit("logout","false"),t.$router.push({path:"/login"}),!1;0===e.errcode?(t.listData=e.data.datalist,t.pageparm.currentPage=e.data.current_page,t.pageparm.total=e.data.total_count):t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,console.log("err:",e),t.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},setAdmin:function(e,t){var a=this;this.$confirm("确定要修改状态吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){S({id:t.id,act:"update"}).then(function(e){0===e.errcode?(a.$message({type:"success",message:e.errmsg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.errmsg})}).catch(function(e){a.loading=!1,a.$message.error("操作，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消"})})},closeDialog:function(){this.editFormVisible=!1}}},dt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("反馈建议")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"content",label:"内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_id",label:"用户ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_name",label:"用户昵称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_headimg",label:"用户头像",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{staticClass:"table_img",attrs:{src:e.row.member_headimg,alt:""}})])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"imgs",label:"图片",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return""!=t.row.imgs?a("div",{},[a("img",{staticClass:"table_img",attrs:{src:t.row.imgs,alt:""}})]):e._e()}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"time_create",label:"新增时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.setAdmin(t.$index,t.row)}}},[e._v("已处理")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var mt=a("VU/8")(nt,dt,!1,function(e){a("de3w")},"data-v-40524844",null).exports,ct={data:function(){return{nshow:!0,fshow:!1,loading:!1,formInline:{keywords:"",token:localStorage.getItem("logintoken")},listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:oe},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=this;this.loading=!0,z(e).then(function(e){if(t.loading=!1,10006==e.errcode)return t.$store.commit("logout","false"),t.$router.push({path:"/login"}),!1;0===e.errcode?(t.listData=e.data.datalist,t.pageparm.currentPage=e.data.current_page,t.pageparm.total=e.data.total_count):t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,console.log("err:",e),t.$message.error("数据加载失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.pagesize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleAction:function(e){var t=this;this.$confirm("确定处理该举报吗？","提示信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){z({id:e.id,act:"update",status:2}).then(function(e){0==e.errcode?(t.$message({type:"success",message:"操作成功!"}),t.getdata(t.formInline)):t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("操作失败，请稍后再试！")})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},cancelAction:function(e){var t=this;this.$confirm("确定忽略该举报吗？","提示信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){z({id:e.id,act:"update",status:1}).then(function(e){0==e.errcode?(t.$message({type:"success",message:"操作成功!"}),t.getdata(t.formInline)):t.$message({type:"info",message:e.errmsg})}).catch(function(e){t.loading=!1,t.$message.error("操作失败，请稍后再试！")})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}}},ut={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("内举报管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"举报内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"内容类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"time_create",label:"新增时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time_create)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleAction(t.row)}}},[e._v("处理举报")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.cancelAction(t.row)}}},[e._v("忽略举报")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var pt=a("VU/8")(ct,ut,!1,function(e){a("6vg8")},"data-v-7783d58e",null).exports;r.default.use(c.a);var gt=new c.a({routes:[{path:"/",name:"",component:U,hidden:!0,meta:{requireAuth:!1}},{path:"/login",name:"登录",component:U,hidden:!0,meta:{requireAuth:!1}},{path:"/index",name:"首页",component:O,iconCls:"el-icon-tickets",children:[{path:"/guides/guide",name:"引导图管理",component:j,meta:{requireAuth:!0}},{path:"/banner/banner",name:"banner管理",component:X,meta:{requireAuth:!0}},{path:"/banner/china_girl",name:"中国女孩banner管理",component:Z,meta:{requireAuth:!0}},{path:"/News/News",name:"资讯信息管理",component:me,meta:{requireAuth:!0}},{path:"/admin/admin",name:"管理员界面",component:Ge,meta:{requireAuth:!0}},{path:"/News/editNews",name:"资讯编辑页面",component:Te,meta:{requireAuth:!0}},{path:"/talks/talks",name:"社区内容页面",component:He,meta:{requireAuth:!0}},{path:"/talks/talk_detail",name:"社区内容详情",component:Ke,meta:{requireAuth:!0}},{path:"/News/news_type",name:"资讯类别",component:Re,meta:{requireAuth:!0}},{path:"/News/news_comment",name:"资讯评论列表",component:qe,meta:{requireAuth:!0}},{path:"/News/first_news",name:"首页栏目",component:ae,meta:{requireAuth:!0}},{path:"/common/hotsearch",name:"热搜榜",component:le,meta:{requireAuth:!0}},{path:"/admin/user",name:"会员列表",component:tt,meta:{requireAuth:!0}},{path:"/talks/talklabel",name:"社区基础标签",component:Je,meta:{requireAuth:!0}},{path:"/other/feedback",name:"反馈建议",component:mt,meta:{requireAuth:!0}},{path:"/other/eport",name:"内容举报",component:pt,meta:{requireAuth:!0}},{path:"/message/message_push",name:"消息推送",component:st,meta:{requireAuth:!0}},{path:"/message/member_device",name:"用户设备",component:ot,meta:{requireAuth:!0}}]}]}),ft=a("NYxO");r.default.use(ft.a);var ht=new ft.a.Store({state:{user:!1},mutations:{login:function(e,t){e.user=t,localStorage.setItem("userInfo",t)},logout:function(e,t){e.user="",localStorage.setItem("userInfo","")}}}),vt=(a("Xg2D"),a("XLwt")),bt=a.n(vt);r.default.prototype.$echarts=bt.a,r.default.prototype.$axios=f.a,r.default.config.productionTip=!1,r.default.use(n.a),l()(i).forEach(function(e){r.default.filter(e,i[e])}),gt.beforeEach(function(e,t,a){0!=e.matched.length?e.meta.requireAuth?Boolean(localStorage.getItem("userInfo"))?a():a({path:"/login",query:{redirect:e.fullPath}}):Boolean(localStorage.getItem("userInfo"))?"/"!=e.path&&"/login"!=e.path?a():(console.log("ssdd",t,e.path),a({path:"/News/News"})):a():a({path:"/login",query:{redirect:e.fullPath}})}),new r.default({el:"#app",router:gt,store:ht,components:{App:m},template:"<App/>",data:{Bus:new r.default}})},NKGU:function(e,t){},NpZO:function(e,t){},PqPu:function(e,t){},VhZ2:function(e,t){},X7ff:function(e,t){},XeDv:function(e,t){},Xg2D:function(e,t){},"dLd/":function(e,t,a){e.exports=a.p+"static/img/logo.9bf6d57.png"},de3w:function(e,t){},gQKk:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA/0lEQVRYR+2W6w2CQBCEZyqRDrQEO9ASLAE7sAO1A+kAK1A7wA6wA61gzSVH4uPgbgMHJrK/l5kv++KIgYMD+2ME+KqAiKQAFpFacyS5e9V2ASwBzCIBFCTzRoBIxrWy4xCOFWhVARFJAEwUg3sjWfrW0Kxg8rkuLhN7M7YKgIzkygcwB3ACcAawJlkoDNSprkNUAVRiBwtyV6sHfBACYGSM+YbkPkBTlRIK8LAAb3dc5VSTHAKQAUhJ9t6CizXufQiHXUNNX+0hMscoNErvIQpV6iqv1SnuAmIE+L0KiIh5lE676K9D4+p9lNpfrIGIEbn3WR7DtUnz92bg7yrwBOSXVCGtUZf9AAAAAElFTkSuQmCC"},rWRm:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA80lEQVRYR+1W2xVBMRCcqYAO6IASqIASdEAHdEALOrg6UAIdUMk4e04+4rivuJL4yH4nO7OzTyKzMTM+CoEPBSTtAKwipeZC8uT7riOwBjCPROBGsmolEAm40W0pwqLAIAUkTQFMAgr3SfLxVRdIWgB4+A7czDgGEDiT3AQRcFEaiM2HJclrAGDn08YUSBoD2AI4eF7SEJBkMlnURsK3pARsZo+yEDBQlwJbTPvkKfCjdkVoatiGTJOCutLN1oZtfeTUsWHU197miH0aNAn7ora9KwSKAk1H6ewXBVbj4955lLoVa5svhlWdZ3kM1NKGf63ACzUdUCHpu3IjAAAAAElFTkSuQmCC"},sPBT:function(e,t){},"t4/9":function(e,t){},tj7r:function(e,t){},tvR6:function(e,t){},uQfq:function(e,t){},w87D:function(e,t){},xIjp:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0ecc9d0b4310845f58ab.js.map